오후 4:32 2020-11-25

업로드까진잘했고
txt만들기도하자.
form으로 받아서 처리하지 싶었는데,
xhr로 단일 전송되는것도 그렇고
txt도 그냥 얻어서 바로 보내버리는게 되지 싶어.
..이러면 인젝션 당하려나;
..ㅇㅇ이상하다.얌전히보내기.

페치로 받는것도있으니.

iter가, 같이 오긴 한다.

그..그냥 json으로보내는건어떠세요?
ㄴㄴ.ㅇㅋ.

그..txt를저장하는데요..뭔가좀이상하긴하네요.
txt저장할건내놓고,나머진ㅇㅋ.


업로드기본양식은

업로더
-----업로드시간은 보충됨.

제목
본문
날짜
작성자
번호

가 txt형식인데, 본문만있어도될듯.ㅇㅇ.
이걸먼저보내서 폴더명만들면되네!ㅇㅋ.


업로더
업로드일시
제목

내용

태그
태그2

정도.

titletext = document.getElementsByName('title')[0].value

오후 4:54 2020-11-25
해당 코드대로면, 주기적으로 파일을 보내는
post 봇이 있다 치면, 이걸 막을 수 없겠는걸??

락 걸면 되겠지만.

아무튼 들어오면 죄다 저장해버리는상태야,지금은.

통합해서보낼까싶기도.ㅇㅇ.
그러네.ㅇㅇ.



유져넴말고토큰은?
흠;
동의.매우동의.

그...파일 매번 올릴 때 마다 수행되어야하다니
별로같아.
1회차 점검하고 2회차엔 폴더명만 있음 될 듯.
2회차부턴 타이틀만 받기 vs 유저명받기.

애초에,여길 포스트로 접근해도 업로드가 못 되도록 해야.

업로드 세션 활성화시,토큰으로비교해야지뭐.ㅇㅋ.
유저로우선ㄱ.

Cannot read property 'value' of undefined
    at uploadFile (upload:159)
그..없는거 찾기 하면뜬다.ㅇㅋ.
항상 있게해서해결.

print(titletext,'t')
sname = secure_filename(titletext)
그.. 빈다.
어쩌지?
받는쪽에서, ,, 내가만든함수쓰지뭐.ㅇ.
 'jar\\제목입니다\\제목입니다\\body.txt'
ㄴ해결

잘됨.
인덱스, 저쪽에서 1부터시작하게함.

그..버튼에 send하고나서 
filelist.forEach(uploadFile)
하게 함.괜찮지싶고 비동기지만 폴더생성도되고.ㅇㅋ.
진짜됨;ㅇㅋ.

makeloginbox는 진짜 혁명적이다...
get 1회에 리퀘스트는 5회발생했지만..인거같다.
근데 스크립트 개별로 동작하긴하니 참고.ㅇㅋ.
300ms에 로그인 페치 갔는데 500ms에 완료됨.
self.onmessage = function () {}
가 응답으로왔다.흠.

return jsonify(data)
??
blob:http://liltbox.iptime.org:25252/22cfddfe-b7ca-4540-b56c-c68e619ca62c
??

아.
페치로그인때는,결과로 잘 왔다.
샤 하고 유져네임이 리퀘스트됨.굿.

로그인 명령때,
return userdb.login(username,sha)
인데, ..? ..는아닌듯하고 로그인응답직후에 왠지blob: 이 발생한다.
자바스크립트라니.대체..

로그인한후엔 쿠키가 저장되어있지.
토큰을 보내자.ㅇ.

getCookie('token')
막 이런걸 내가 해 뒀음;대체..대단하네.

이후엔토큰전송이라이거지.로그인보증의결과.ㅇㅋ.

비로그인상태면, ""가 전송되니,그러려니하자..
..이게되나.안되지.ㅇㅋ.

tokencheck(token)
이름이별로다.
ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ
getname(token)
있네.
username
일시 noname이 들어오니 알고있고.

타이틀.폴더명.
바디.파일내용.

herotext
tagtext
username

이것의처리가필요하다. 업로드 일시에 더해.


1.이미지죄다보냄_실패시 다시? 띄우기.

2. 이미지 잘 되었으면, 텍스트 전송.빨리됨.

3. 텍스트 쓴 후에, 겟쟈수행.

4. 빈 셋 얻고, 겟쟈결과덮고,  태그1,태그2, 업로더, 날짜를 덮기.

태그2는 겹침우려있다.알고있고,,
태그1,업로더,업로드날짜는 독립적으로 추가됨.
---------------
겟쟈-결과추가- newdict를 보여주기-태깅-편입승인
을 해야할까??

zip업로드시는,필연적으로 사후 태깅이 필요함.동의함. 편입승인도.

그냥업로드시는 뭐있나싶고.
근데 좀 낫긴 한게,

이미지
제목
내용
-----만으로 보낸 뒤에,
결과처리하면, 태그추가를 이후에 하면 됨.
근데 귀찮을거같고.결과확인이 필요할까의문제.

이것도고민하면 매몰되니 빨리 ㄱㄱ.
가능한 통일되게.ㅇㅋ.

같을거같다.태깅도.ㅇㅋ.

        실패시백.
이미지-텍스트-겟쟈-보여주기-태깅-승인-처리완료.
ㅇㅋ.


오후 6:22 2020-11-25
token결과가, 업로드세션의 유저명이면, ㄱㄱ.

태깅을 강제하지말까?

일반적으로 관리자,자기글이면- 삭제권한 있으면
주연 태그의 태깅이 가능하게할까싶다.

업로드다하고승인한후에, 자기가 업로드한목록에 대해서만 태깅하기가 좋아 뵘.
더 줄여서, 승인절차를 생략하고, 나중에 그냥 차차 하지 뭐.ㅇㅇ.ㄱㄱ.

이러면, 관리자가 붙여 버린경우, 아..내가하려고했는데..흑흑.. 을 당하려나.

new uploaded! 상태인것은 따로 처리하면되지뭐싶다.ㅇㅇ.

일단 썩 일관적이군. 태깅강제가 안되긴해도.ㅇㅋ.

내가 업로더라면, 잘모르겠으니 얼른 ㄱㄱ 하고싶을거야. ㅇㅇ.


내가업로드한글에대해서 고속태그입력을 매우 쉽게해야겠어.

글업로드----처리완료!
zip업로드.........................처리완료!

이걸로 탈출하게.ㅇㅋ.

고속태그고뭐고 단에서 분리하자.

내가쓴글보기
(전체글보기)-관리자만보이게


txt에 업로더명을 넣어버릴까?
날짜는 적당히 오늘 넣고.
번호는..곤란.

흠.

뭣하면 txt인데, 부분적으로 얻으면 통과하게하고싶네.

5개아니면거른다는, 우연히 제목 = 같은게 발견되는경우를 막기위해서였지..

번호의경우, 임의설정이안되니곤란.
근데 후처리필연적이니 이건 더 논하지 말자;ㅇ.

실패시 확실히 이벤트 뜸.굿.
일단 얼럿 뜨게 했다.ㅇㅋ.

서버가 아예 무반응이면 반응이없다..만 대기하다가 얼럿 뜨네 .ㅇㅋ.
누른횟수만큼뜸.ㅇㅋ.
ㄴㄴ. 커넥션 타임아웃이라 계속뜬다.

380메가에 4초정도로딩시간.ㅇㅋ.

제목이 없는경우, jar에 그냥 뿌려져버린다.처참하군.

files
드롭되는순간의 일이다.

files[0].type
"image/jpeg"
*이 그래서 붙는거군.정규표현식같이.아하..

files[0].type == "image/*"
안된다. 정규상태가아니라그럼.
files[0].type == "image/gif"

var re = /image/.../;

그냥몇개안되니그리하자.ㅇㅋ....

["image/jpeg","image/gif","image/png","image/bmp","image/webp"]

in 연산자가 뭔가 다른듯?

["image/jpeg","image/gif","image/png","image/bmp","image/webp"].includes( filelist[7].type )
후후.


function tooheavycheck(file) {
  return (file.size/1024/1024 <20)
}
간결해서 좋네.


한편 zip 업로드에선...

 raise BadZipFile("File is not a zip file")
zipfile.BadZipFile: File is not a zip file
이 뜬다.


['2020.11.25 21:53:53:
,jar\\backup\\backup.zip,not img or txt.skip file.', 

'resizer:no img!',

 "2020.11.25 21:53:53:,backup,(Exception('empty dir! : backup'), ':at line', 182)", 
"2020.11.25 21:53:53:,no title,(Exception('empty dir! : no title'), ':at line', 118)", 

'2020.11.25 21:53:53:,jar\\Suto_Futago_ni_Aisareteimasu_Futago_Yuri_Ecch
i_Anthology_Korean\\Suto_Futago_ni_Aisareteimasu_Futago_Yuri_Ec
chi_Anthology_Korean.zip,not img or txt.skip file.']


백업 익셉션이 왜 뜨는거지..?
아.

2020.11.25 21:53:53:,jar\backup\backup.zip,not img or txt.skip file.
resizer:no img!
2020.11.25 21:53:53:,backup,(Exception('empty dir! : backup'), ':at line', 182)
2020.11.25 21:53:53:,no title,(Exception('empty dir! : no title'), ':at line', 118)

는 backup.zip이 zip해제가 실패해서 뜨는 경우였다.ㅇㅋ.

이 경우, 에러가발생하고,
아무튼처리되긴한다.
굳이 더 하기보단 냅두지 뭐.

그..아마도..아무튼.. upload done! 이 뜨는게, 업로드됨의 dom업데이트 전에 발생하네.ㅇㅋ..
7개고, 4개째에 메세지뜨네. 아무렴 어때.

required 있네.놀랍고.
required pattern = "[a-zA-z].+[0-9]" 도 된다.!

placeholder = ""
required
ㅇㅋ.

그냥글쓰기는 거의 처리 된 듯.
토큰 로그인 검증과,

오후 10:35 2020-11-25
zip 안의 폴더들.

zip 안의 이미지파일
zip 안의 txt파일
zip 안의 개별이미지파일


<div class="upload-btn-wrapper">
뭐냐이건!

당일삭제원칙.매우좋은듯.


만화 zip파일에 txt파일첨부하는경우.매우흔할듯.

이경우, 보아하니, 폴더 랍시고 업로드할것같다.

풀게되면,곤란해지는경우, 개별 img와 txt가 모조리 개별폴더화 되어버린다;;

오후 11:40 2020-11-25
그.. 토큰에서 이름이, 저기 목록에 있으면,, jarlock하고 ㄱㄱ.
없으면, 튕겨내기.

..아닌가..

접근 경로가 너무 많아.
zip파일
그냥글쓰기
두개뿐이네!

코드가 슬슬 스파게티될것같다.

return 하니 얌전히 200뜸.
board name err
식으로나오더라도. 흠..
404를보내야겠네.
ㄴㄴ. 메세지 얼럿해버림.

https://stackoverflow.com/questions/15772975/flask-get-the-size-of-request-files-object
램에서 오버당할수있다.
blob으로 읽어서 크기비교하는경우.의외네.!

이미지 가고, 비동기로 텍스트가 먼저 도착해버림.
텍스트의 유무로 판단하는게 부적절하다 주장함.


herotext = request.form['herotext']
없는 값을, 폼에서 미입력시로 404가 리턴됨.아하.
형식에안맞단게 뭔소린가했네.

오전 12:33 2020-11-26
일단된듯.더있나?

에러때 그냥 매 에러 띄우게하면,,진짜싫고.20개다지워야.

1.이미지는 비동기로 응답이 되돌아옴.
그때마다 스택을 쌓고,
그게 현재 이미지리스트의 길이와 같아지면,,
txt를보낸다.

이게최선같음.
+1 코드에 좀 지저분해지지만..

근데 이러면,
에러나면 영영 모르게되어버릴수가있어..
에러난거만다시보내기 같은건 진짜 별로고.ㅇ.

에러 뜨면 다시보내라고 말하지뭐.ㅇ.

글쓰기시,공백과공백이면,알아서지우라하지뭐.ㅇㅋ.

ㄴㄴ.경험으로부적절함.
제목을 꼭 넣으세요! 할까싶다.

파일을 선택하거나! 내용을 채우세요!

하거나. 이게젤낫네.

그..
filelist.forEach(uploadFile)
밖에 없는 버튼링크라서,곤란하군.

파일업로드완료시만 이벤트가 발생하도록 되어있다지금.

그냥 평등하게 취급하자..싶은데?
ㄴㄴ.


1.일단 파일done이 붙으면,실행되었단거고,,
fail이면?? 알아서하세요!

1.파일이되었고, 그말은 img가 0이아니었고,
그럼 다찼으면 txt보내기.ㅇㅋ.안차면 에러다.
..이논리이상한듯.

텍스트가 이걸 하게 하는게 썩 별로다.ㅇㅇ.

그냥 중립적으로 구분하세요.네.

let imglen = document.getElementsByClassName("imgrect").length
  if(imglen==0 

업로드파일은, done이나 에러붙음.

쨘 하고 업로드완료가떠야겠어.

1.이미지만있어도 텍스트는 무조건 간다.
2.이미지는 반복수행됨.

이미지만있는경우
텍스트만있는경우
둘다있는경우

1.이미지가없으면 텍스트 바로 보낸다. 자동처리됨.

2.이미지가있으면, 이미지갯수==완료갯수면 텍스트보냄.

3.이미지오류나면 ,오류+만하고 아무일없다.
4.텍스트오류나면 ..


1.이미지.돌리고,만족시,텍스트수행.  오류면 오류!다시!ㄱㄱ.

2.이미지없으면,바로텍스트수행.ㅇㅋ.

되게간단하네.ㅇㅋ.

xhr.addEventListener("load", filedone )
아..여기에 두개추가가 왜 안되겠어.어ㅓ어..ㅋㅋㅋ..

그..
일단 하고
삭제한후에
다시해도
일단한것이 남아있다.

흠;;;

근데 세션들어가면서 밀폐가능해뵘.ㅇㅋ.


오전 2:12 2020-11-26
""으로 잡입하는경우 꽤나 곤란하다.
즉, "" 계정을 미리 만들어두잔것.ㅇㅋ.
애초에 로그인도안되겠지만..을 기대하고.

락 쟈 하느니
getjar에 함수 둬서 각 사용자별 폴더를 만들자싶다.ㅇㅇ.
왜냐면, 악성사용자가 10시간 점유하고있는게 가능한 구조니까.
근데 서버가 바쁘면..이긴 해.

..반론: 다운로드시, 즉 zip과 개별업로드시, 폴더지정이.. ..도대체어렵진않겠군.ㄱㄱ.

결국 이렇게 되는구만.

결과폴더의 imgtower 내의 id가 충돌할 우려가 있다.그것을 주의하고.
ㄴ이거 하려면 id 같은걸로 해야하지 싶은데.. 아니 그냥 랜덤 uuid로.
id같은거만나면, 고려외의에러다.ㅇㅇ.

유사제목판별기
유사이미지판별기

라도 만들까.

근데막말로 그냥 한명이 지속적으로 1.8기가짜리 계속 업로드 하고 있으면 어쩌라고 인거야.ㅇㅇ..
ㄴ는 밴으로 대응하지뭐.

토큰이 털리면 사실상 비밀번호역할을 한다.
즉 토큰은 생성되고나서 얼마뒤 자체파기되어야 해.
근데 그러면 자동로그인유지가 무한히 안 되잖아.
즉 쿠키로 비밀번호를 저장해야한단것! 이려나.

ipb_member_id=384 ipb_pass_hash=1e6a6999

그렇지.ㅇㅋ.

나도이렇도록수정하자.
토큰은, 아무튼 받은상태면 그걸로쓰고,없으면,,자동파기되면.. ..???
즉 기간파기가 아니라, 1시간동안 로그인 안 하면- 식으로 하는거겠지싶다.ㅇㅋ.

1.쿠키에 비번해시저장.
2.자동로그인. 토큰받음.
3.행동시마다, 토큰제공.
4.로그아웃시 토큰파기 / 토큰이 다르면 행동취소,로그인권고. / 행동안하면 토큰파기

흠.. 10시간켜놓고있다가 하면 실제로 파기되곤했어.이게그런이유겠군.

뭐 이건 방식이라 하지.


크롤링한결과여도, 해시아이디로 하면 근본적으로 겹칠 일이 없다.
즉 번호 자체를 없애자. 본문링크만 남기고.
필요시 추적하라고 하지 뭐.

이 경우, 크롤러에서 항상 이전 결과를 보유하고 있어야 하는데, 감수할 만 하다.
이전의 컨셉이 파일기반이었던만큼.ㅇㅇ.



오전 2:32 2020-11-26

아무튼 오늘
작업 복귀에 성공했고
많은 일이 있었다.

zip 업로더 나름 구축 함. 이제 라디오버튼의 파이썬변수렌더링만 성공하면 되겠어.
이후 게시판 추가기를 만들어야겠음.

글업로더는,정상동작하며, 되게 잘 될듯 하다.

txt파일을 마지막에해서 결과보고도 받게되었다.
iter 1번부터 하고,

아. 1,2,3 업로드 한 후, 삭제하고 업로드하는경우의 문제..가 있었는데
성공! 시 filelist를 비우면 되겠네.ㅇㅇ.
파일업로드는 딱히문제없으면 return 잘 들어올테고
txt는, 이런저런 메세지도 끌고오는데,, 가령 계정불일치의 경우, 200으로 들어온다.
return에서 에러 자체를 내보낼 수 있을거야. 메세지와함께. 그렇게 하자.ㅇㅇ.
그러고 200시, 아무튼 처리완료로 되게 하고, 그경우를 일원화 하지.
zip은 다행히도 단일파일선택이라 노상관.ㅇ.
zip도 드롭 영역 두면 된다지만,일이커진다.ㅇㅋ.

..그...
abort 가 import 안 된 상태에서, 에러떴는데, 잘 처리되었다고한다.
역시 이벤트메세지가 정확히 ㅇㅇ 일때로 하는게 좋겠어.
https://stackoverflow.com/questions/33308932/xmlhttprequest-detecting-404-not-found
이렇게잡으란다.
hr = new XMLHttpRequest();
xhr.open("GET", url, true);

xhr.onloadend = function() {
    if(xhr.status == 404) 
        throw new Error(url + ' replied 404');
}
https://stackoverflow.com/questions/30426277/catch-a-404-error-for-xhr




jar lock을 하냐, 계정별 폴더를 만드냐의 문제.
어짜피 cpu 부하 생각하면 단일처리가 백번옳다.
기다려주세요...떠도 어쩔 수 없지 뭐. 인걸로.
zip은 이미처리, 본문만 저장하면 아무튼 문제없다. 태그빼길잘했네.


응답체커.
if(xhr.status == 403)
이면 로그인하시오! 나 권한없음!인거고

200이면 자러리됨ㅎㅎ 하면되지싶다.
xhr.addEventListener("load", filedone )
가 좀 귀찮아지네,이러면...

if(xhr.status == 404) 만 익명함수로 부텽야할듯.
아니면 이중함수로 ㄱㄱ.그게낫지싶다.ㅇㅋ.

temp1.srcElement.status
로 500을 얻어냄.ㅇㅋ.

jar mkdir 엑세스거부떴다..인데 보통은 200뜸.ㅇ바로이거군.ㅇㅋ.

(1==2 ? '$2.00' : '$10.00');
잘쓰자.ㅇ. 틀리면 뒤의것.

(1==1 ? console.log(1) : alert(3));
이것도됨을확인.

후후후.. 403 이제 뜨고, 그것을 캐치까지 함.
그..완료시,비우기. 파일리스트를.
..이래도남아있잖아.
그렇지..
가아니고 원래 이러면 응답 올때까지 jar 처리되어야 해.ㅇㅋ.

아. 5개 업로드했는데, 6개째 하니 실패떠서,
2개로 확 줄이고 ㄱㄱ 하면,, 문제가 된다.
근데 이건 에러뜨면 jar 비워줘야지.저쪽의문제에요.ㅇㅋ.

아니면, 편의성상이라고보나?
ㄴㄴ애초에그냥 다버리고 ㄱ.ㅇㅋ.


zip은 투고했는데 에러시 얼럿뜸.확인요청.

return zip 파일을 줘!
는 애초에거르니 ㅇㅋ.

2개처리함. jar 에러시삭제 ㄱㄱ.

에러가뜨면..이라는걸 검출할수가없군.

리트라이 기회를 줘..야하고
근데 에러시 삭제하면, 리트라이하면 곤란해.

여기서!
세션제가 나오는데요.

리트라이로 버튼 누르는 순간,  jarlock을 체크하고

1lock이 공백이면,
2내가입주한다
3 jar 비운다
4.수행한다

가 되어서,괜찮지싶다.ㅇㅋ.

이게 구조상 훨 낫네.ㅇ.

토큰이고뭐고 지금 보안이 핵심은 아니니 그냥냅둘까싶다.ㅇㅋ.

토큰은 막 랜덤해서, 원비밀 과정추적못하게하고.

오전 3:37 2020-11-26
unlockjar()

좋고,
파일업로드후에 이걸 플라스크에서 수행하게하자. 저쪽에서 요청을 마무리로 하는게 아니라.
이러면 되게 간결함. 핵심적으로 ,저기서 악성이불가.

저기서 로그인만해두고, 대기한다 라는게 생길수도있는데, 그런일은 도무지없다고보고.ㅇㅋ.
강제로 로그아웃시켜버릴까?것도좋네..지만 파일전송 누르는거라면..싶다.

겟쟈도 아예 밀폐시켜야! 싶은데. ㅇㅇ.

그.. 버튼눌리면 ,업로드 시도전에 일단 겟쟈 안 바쁘나 부터 ㄱㄱ 하고,
밀폐해서하면돼. 굿.


zip
200이면 메세지 띄우고 ,아니면 오류고
200인데 메세지가 ok면 정말ㅇㅋ인거고.

일단은 결국 다시 e로 alert 해야겠어,지금.ㅇㅇ.
200이면,띄우기하지뭐.ㅇ.

그..중간에 에러가 나면요. 언락-쟈를 해야하지않겠습니까?
결국 try로 다 묶어야하나?
2중에러면요.
흠..

에러뜨면 아무튼 언락보증해야해.ㄱㄱ.

언락쟈가 발생하는,큰 이유는, 1기가짜리 처리하느라 야.ㅇㅇ.
2시간되면 내보내던가하지뭐.ㅇ.

플라스크 전역에서 에러로깅이되네.서버가 강인하게 돌아감.ㅇ.ㅋ
https://flask-docs-kr.readthedocs.io/ko/latest/errorhandling.html#id9

try로 감싸자..하.

더나은게있을거야근데.

아.
아.
예상시간의 2배만큼 잠그고 있지.썩 좋네.
그거지나면 풀어버리고. ㅇㅇ.타이머로 해버리면됨.오진다...
ㄴ이경우, 다짜고짜 20분전에한게 튕길수있으니 주의.


ㄴ가 아니고, 강제해제가 아니라 수동해제하게하자.
해제하시겠습니까? 예/아니오
ㅇㅋ.

가아니라 넘었으면 그냥 오버라이드로 해제하고가자.ㅇㅋ.


아.이경우, 1시간이아니라 의외로 10초 이랬는데 20초경과시..가 우려됨.흠.

아. 403발생시, 뒤에것 안 하고 도망가버린다.

아..

어쨌든 이 함수 내에서, 마무리가되든안되든 탈출하는경우..같은건없겠지.

근데 안 되어도 자기자신은 되고.

막,다하고나면 2기가 걸어두고 ,는 정말이니 ㅇㅋ고
2기가 걸고 취소하여도 jar가 굳어있는경우를 보자.되나?

즉 모든 403같은에러는 모아서 jar풀고 ㄱㄱ가 됨.ㅇㅋ.
그러나, 자체에러가나는경우
,곤란하네.

1.사용시간안에해결하도록하고 문따고들어가기.
2. 사용신청이력을 남기게 한다. 이걸로 밴가능.적절해보임..

파워레벨을 둘까? 1이면 100메가 식으로. 10번만 올리면 1기가 되겠지 뭐.
ㄴ즉 업로드 로그가 필요하다.계정별로 남겨주세요!

클리어쟈는언제하지.밴할때하지싶다.ㅇㅋ.

아.
ㅇ.?
업로드창들어가기전에 쟈 검사를 하고,로그오프해도 좋아보였는데
서버에서 주기적으로 보고받는다던가.실시간모니터로군.
cpu점유,램,남은용량 이라던가.좋네.
주기적 jar 스캔 보고.5초마다의 *.*을 띄워주기 라던가. 총파일갯수.그게좋다. 폴더파일/전체파일 을 5초마다.
ㅇㅇ그러고 줄어드는거 시간이랑.ㅇㅋ.

아!무!튼! 에러냈을떄, 잠겨버린채로 남으면 곤란해.

https://helloyjam.github.io/python/check-cpu-and-memory/

그러게다.

쿼드코어니까 서버프로그램 3개 틀어버린다의 작전은요?
그..마이너 위성 서버를 두면 어떤가싶긴한데,이상하지;
파일제공만 하는 서버를 두면 꽤나 괜찮지싶긴하다.ㅎㅎㅎ..
이거도 다 db하나에 통합이면 괜찮았나싶기도하고.ㅇㅋ....

일단, 쟈 락의 문제는 글려니 하고. 이러느니 그냥 계정별하는게쉽나싶기도하다만,중복은용납못해요!

악성문제는 너무 고려 말기. 기본적으로라도 f5 막 눌러도 지금 방어가 안 되니까.ㅇㅋ.

업로드 모드로 진입시,
사전 페이지에서, 업로드 현황, 사용이력장부확인 이 필요하다.
예상 잔여시간:
같은것도 있던가. 이정도면 썩 좋지싶다.ㅇㅋ..
cpu사용로그나 램, 공간 로그도 같이 그래프로보이면좋겠어.매우동의함.ㅇㅋ.

오버라이드가 필요하다 이거야.그걸 판단해서 할 수 있도록. 그 권한은 물론 2배시간이겠지만...
근데 애초에 단일 파일 업로드에 해당하는 시간의 ..라서.ㅇㅋ..

대부ㅜㄴ의경우 그냥5분더기다리지뭐 로 해결되겠지.
1시간한대놓고 , cpu점유랑 파일상태보아하니 이거 진행 안 되는거다 하면 ㅇㅋ고
실제로 파일을 업로드 하는 경우, 이건 정말 그럴수도있으니 정말 모른다고.애초에이렇게보자.ㅇㅇㅇㅇㅇ.

즉,잠금걸어도 1시간이라해도 중간에 끊어버리는경우

오전 4:49 2020-11-26
이상한 고민 말고 .이게 전체적 향상이되나 보기도하고.
아무튼, 1기가면, 받는쪽에선 굳어버려.어쩔수없고,납득하자.

로그를 착실히 남기고.그럼 될 듯.

jarlog 라던가 따로 남길까?
아.이건굳이 껐다키는게아니면 괜찮겠네..가아니고 ㄹㅇ 자로그남긴다.ㅇㅋ.

파일사이즈를 보내는측에서 하는군.아하. 받는쪽은 blob이라 모르는채로였던거야!
이걸 같이 보내줄까싶다. 그러면 est.time이 나오지.ㅇㅋ.굿.

600메가에 600초쯤되려나.

20메가면,20초면되겠지싶다.

뭔가되게쉽게되었는데.

    jarinfo[2] = size*1.5
TypeError: can't multiply sequence by non-int of type 'float'

쳇.자기업로드인경우 되어버리네.

그냥 이러면 jarlock대신 개별 jar하면되는거아냐??
후후.잘 뜸.

estime 11..s인가보다.ㅇㅇ.
메가잖아!

380메가짜리.제대로나오긴하고

31초동안 pending으로 읽고, 서버측에 찍힘.
즉, 내부처리자체도 꽤나 길었단것.
프로그레스 바라도 만들까싶다.ㅇㅇ.

자체에서하면 아무래도 아무튼 빠르다.너무.ㅇㅋ.
ssd 쓰기니까 당연한거겠나싶다.

pending이 꽤나 길었음을 보고함. js자체에서 처리하기가.
파일사이즈읽기를 안 하면 훨 빠를까싶기도.ㅇㅇ.

투고하기 누른 순간 31초의 대기시간이 발생한다.
되-게 느려진거같기도 하네. 그냥 얌전히 form 쓸걸그랬나?

구버전이 있었음 좋았으련만..

jarbusy가 안 사라짐.
filesize 읽기가 딱히 느리진않음.ㅇㅋ.

시간이 오히려 증가했다.아하..

ㅋㅋㅋ
언락 쟈 하면서, intsec이 다시 구동되어버렸어.그랬었군.
시간상안풀린건 이해됨.ㅇㅋ.

jarinfo[0] == ""
와................................이런 버그가 진짜 발생하는구나.

오전 5:40 2020-11-26
ㅇㅋ.잘 들어감.
문제라고하면,

혼종의 경우, 심하게 곤란해진다.
근데일단 겟쟈수행하는걸 기준으로 하니,그걸로좋아.ㅇㅋ.

동시업로드는 겟쟈반환전엔안되겠지뭐.시간est로 되는게 참 좋고.ㅇㅋ.

업로드바는,지금하라면바로하겠지만..재밌긴한데..

하.iter때는 락도 함부로 못 하겠네. 

진짜 이쯤되면 정신 나갈지도몰겠다.
애초에 토큰이, 개별구획넣는게 참 좋은거같은데말야.
iter는 좀 심각한 문제다.ㅇㅇ.
어 느리네..딴거해야지..ㅎㅎ..하고 할수도있음.동의.

iter는 ,치명적이게도,병렬적으로 들어온다.
getjar고뭐고 없어요!

일단 밀폐하고, ok 들어오면 iter로 보내야지싶은데.

#return "jar busy! by {}, from {}, remain time: {}".format(jarinfo[0],jarinfo[1], (10+jarinfo[2])-(intsec()-jarinfo[1]) )
이걸, 그..그냥 표기합시다 싶다.ㅇㅇㅇㅇㅇㅇ.
지금 업로드 가능
과 함께. 폴링으로받지뭐.ㅇㅇ.
아니 새로고침때 받으면 됨.

그 찰나에 행해지는경우도있겠지..만..
몰겠고 으헝ㅎ곻겋ㄱㅎ

근데 img iter도 제대로 처리하는게좋지싶다.ㅇㅇ.

오전 5:59 2020-11-26
대충 잘 됨.후후..

내일은 진행바 zip에만 추가하고

일단은 ㄹㅇ 괜찮다싶다. pass는 황홀했고 authjar도.

대충되었다치고, 프로그레스하고 이젠 뭐하지??

그. jar의 실제 수행이다, 드디어.

txt의 done 직전에,
그리고 zip의 제거 직후, 수행하고,,

1.get으로 일단 newdict얻고
2.서버측받은정보 업뎃하고
3.추가하고끝내지뭐.ㅇㅇ.
id겹침은 크롤러에서발생.

치명적일수있는게, 크롤러에서한결과를 누군가 쓰는경우..다.
크롤러는 이렇게되어서야, 나만 쓰는게되나싶고..

근데 1회성 수집외에 크게 할일있나싶다.
나 개인적으론 3군데만 하면 완벽히 충분하니까.ㅇ..


